<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake - Alienes.me</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            850: '#1f2937',
                            900: '#111827',
                            950: '#030712',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #0f172a;
            background-image: 
                radial-gradient(at 0% 0%, rgba(16, 185, 129, 0.15) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(5, 150, 105, 0.15) 0px, transparent 50%);
            background-attachment: fixed;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        canvas {
            image-rendering: pixelated;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.1);
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-2xl">
        <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
            <div>
                <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-emerald-400">Snake</h1>
                <p class="text-gray-400 text-sm">Klasik yƒ±lan oyunu</p>
            </div>
            <div class="flex gap-3">
                <div class="glass-panel px-4 py-2 rounded-xl text-center min-w-[100px]">
                    <div class="text-xs text-gray-400 uppercase tracking-wider">SKOR</div>
                    <div class="text-xl font-bold text-white" id="score">0</div>
                </div>
                <div class="glass-panel px-4 py-2 rounded-xl text-center min-w-[100px]">
                    <div class="text-xs text-gray-400 uppercase tracking-wider">REKOR</div>
                    <div class="text-xl font-bold text-emerald-400" id="highscore">0</div>
                </div>
            </div>
        </div>

        <div class="glass-panel p-1 rounded-2xl mb-6 relative">
            <canvas id="gameCanvas" width="600" height="600" class="w-full h-auto rounded-xl bg-gray-900"></canvas>
            
            <!-- Game Over Overlay -->
            <div id="gameOver" class="absolute inset-0 bg-gray-900/90 backdrop-blur-sm rounded-xl flex flex-col items-center justify-center hidden z-10">
                <div class="text-6xl mb-4">üíÄ</div>
                <h2 class="text-3xl font-bold text-white mb-2">Oyun Bitti!</h2>
                <p class="text-gray-400 mb-6">Skorun: <span id="finalScore" class="text-emerald-400 font-bold text-xl">0</span></p>
                <button onclick="newGame()" class="px-8 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2">
                    <i class="fas fa-redo-alt"></i> Tekrar Oyna
                </button>
            </div>

            <!-- Start Overlay -->
            <div id="startScreen" class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm rounded-xl flex flex-col items-center justify-center z-10">
                <div class="text-6xl mb-4">üêç</div>
                <h2 class="text-3xl font-bold text-white mb-6">Hazƒ±r mƒ±sƒ±n?</h2>
                <div class="flex flex-col gap-3 items-center text-gray-400 mb-8 text-sm">
                    <div class="flex items-center gap-2"><span class="px-2 py-1 bg-gray-800 rounded border border-gray-700">WASD</span> veya <span class="px-2 py-1 bg-gray-800 rounded border border-gray-700">OK TU≈ûLARI</span> ile oyna</div>
                    <div>Mobilde ekrana dokunarak y√∂nlendir</div>
                </div>
                <button onclick="startGame()" class="px-8 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2">
                    <i class="fas fa-play"></i> Oyunu Ba≈ülat
                </button>
            </div>
        </div>

        <div class="flex gap-3 mb-6">
            <button id="pauseBtn" onclick="togglePause()" class="flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2">
                <i class="fas fa-pause"></i> Duraklat
            </button>
            <button onclick="newGame()" class="flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2">
                <i class="fas fa-redo-alt"></i> Yeniden
            </button>
            <a href="/" class="flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2">
                <i class="fas fa-arrow-left"></i> Geri D√∂n
            </a>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Adjust canvas size for responsiveness
        function resizeCanvas() {
            const containerWidth = canvas.parentElement.clientWidth - 8; // padding
            canvas.style.width = containerWidth + 'px';
            canvas.style.height = containerWidth + 'px';
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        const gridSize = 20;
        const tileCount = canvas.width / gridSize;
        
        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0;
        let dy = 0;
        let score = 0;
        let highscore = localStorage.getItem('snakeHighscore') || 0;
        let gameLoop;
        let gameSpeed = 100;
        let isPaused = false;
        let isGameRunning = false;

        document.getElementById('highscore').textContent = highscore;

        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            newGame();
        }

        function drawGame() {
            if (isPaused || !isGameRunning) return;

            clearCanvas();
            moveSnake();
            drawSnake();
            drawFood();
            checkCollision();
            
            if (isGameRunning) {
                gameLoop = setTimeout(drawGame, gameSpeed);
            }
        }

        function clearCanvas() {
            ctx.fillStyle = '#111827'; // gray-900
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid lines (subtle)
            ctx.strokeStyle = '#1f2937'; // gray-800
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= tileCount; i++) {
                ctx.beginPath();
                ctx.moveTo(i * gridSize, 0);
                ctx.lineTo(i * gridSize, canvas.height);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i * gridSize);
                ctx.lineTo(canvas.width, i * gridSize);
                ctx.stroke();
            }
        }

        function moveSnake() {
            if (dx === 0 && dy === 0) return;

            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('score').textContent = score;
                generateFood();
                
                if (score > highscore) {
                    highscore = score;
                    localStorage.setItem('snakeHighscore', highscore);
                    document.getElementById('highscore').textContent = highscore;
                }
                
                // Increase speed slightly
                if (gameSpeed > 50) {
                    gameSpeed -= 2;
                }
            } else {
                snake.pop();
            }
        }

        function drawSnake() {
            snake.forEach((segment, index) => {
                if (index === 0) {
                    // Head
                    ctx.fillStyle = '#10b981'; // emerald-500
                    ctx.beginPath();
                    ctx.roundRect(
                        segment.x * gridSize + 1,
                        segment.y * gridSize + 1,
                        gridSize - 2,
                        gridSize - 2,
                        4
                    );
                    ctx.fill();
                    
                    // Eyes
                    ctx.fillStyle = '#064e3b'; // emerald-900
                    // Logic to position eyes based on direction could be added here
                    // Simple eyes for now
                    ctx.beginPath();
                    ctx.arc(segment.x * gridSize + 6, segment.y * gridSize + 6, 2, 0, Math.PI * 2);
                    ctx.arc(segment.x * gridSize + 14, segment.y * gridSize + 6, 2, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    // Body
                    const gradient = ctx.createLinearGradient(
                        segment.x * gridSize,
                        segment.y * gridSize,
                        segment.x * gridSize + gridSize,
                        segment.y * gridSize + gridSize
                    );
                    gradient.addColorStop(0, '#34d399'); // emerald-400
                    gradient.addColorStop(1, '#059669'); // emerald-600
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.roundRect(
                        segment.x * gridSize + 1,
                        segment.y * gridSize + 1,
                        gridSize - 2,
                        gridSize - 2,
                        2
                    );
                    ctx.fill();
                }
            });
        }

        function drawFood() {
            ctx.fillStyle = '#ef4444'; // red-500
            ctx.beginPath();
            ctx.arc(
                food.x * gridSize + gridSize / 2,
                food.y * gridSize + gridSize / 2,
                gridSize / 2 - 2,
                0,
                2 * Math.PI
            );
            ctx.fill();
            
            // Shine effect
            ctx.fillStyle = '#fca5a5'; // red-300
            ctx.beginPath();
            ctx.arc(
                food.x * gridSize + gridSize / 2 - 3,
                food.y * gridSize + gridSize / 2 - 3,
                3,
                0,
                2 * Math.PI
            );
            ctx.fill();
            
            // Glow
            ctx.shadowColor = '#ef4444';
            ctx.shadowBlur = 10;
            ctx.fill();
            ctx.shadowBlur = 0;
        }

        function generateFood() {
            food.x = Math.floor(Math.random() * tileCount);
            food.y = Math.floor(Math.random() * tileCount);
            
            // Ensure food doesn't spawn on snake
            snake.forEach(segment => {
                if (segment.x === food.x && segment.y === food.y) {
                    generateFood();
                }
            });
        }

        function checkCollision() {
            const head = snake[0];
            
            // Wall collision
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                gameOver();
                return;
            }
            
            // Self collision
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    gameOver();
                    return;
                }
            }
        }

        function gameOver() {
            isGameRunning = false;
            clearTimeout(gameLoop);
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').classList.remove('hidden');
        }

        function newGame() {
            clearTimeout(gameLoop);
            document.getElementById('gameOver').classList.add('hidden');
            document.getElementById('startScreen').classList.add('hidden');
            
            snake = [{x: 10, y: 10}];
            dx = 0;
            dy = 0;
            score = 0;
            gameSpeed = 100;
            isPaused = false;
            isGameRunning = true;
            
            document.getElementById('score').textContent = score;
            document.getElementById('pauseBtn').innerHTML = '<i class="fas fa-pause"></i> Duraklat';
            
            generateFood();
            drawGame();
        }

        function togglePause() {
            if (!isGameRunning) return;
            
            isPaused = !isPaused;
            const btn = document.getElementById('pauseBtn');
            
            if (isPaused) {
                btn.innerHTML = '<i class="fas fa-play"></i> Devam Et';
                clearTimeout(gameLoop);
            } else {
                btn.innerHTML = '<i class="fas fa-pause"></i> Duraklat';
                drawGame();
            }
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
                e.preventDefault();
            }

            if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
                if (dx === 0) { dx = -1; dy = 0; }
            } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
                if (dx === 0) { dx = 1; dy = 0; }
            } else if (e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') {
                if (dy === 0) { dx = 0; dy = -1; }
            } else if (e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') {
                if (dy === 0) { dx = 0; dy = 1; }
            } else if (e.key === ' ') {
                togglePause();
            }
        });

        // Touch controls
        let touchStartX, touchStartY;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, {passive: false});

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (!touchStartX || !touchStartY) return;

            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;

            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;

            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (diffX > 0 && dx === 0) { dx = -1; dy = 0; }
                else if (diffX < 0 && dx === 0) { dx = 1; dy = 0; }
            } else {
                if (diffY > 0 && dy === 0) { dx = 0; dy = -1; }
                else if (diffY < 0 && dy === 0) { dx = 0; dy = 1; }
            }

            touchStartX = null;
            touchStartY = null;
        }, {passive: false});

        // Initial draw (static)
        clearCanvas();
        ctx.fillStyle = '#10b981';
        ctx.font = '20px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Oyunu Ba≈ülat', canvas.width/2, canvas.height/2);
    </script>
</body>
</html>
