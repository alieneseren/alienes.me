<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe - Alienes.me</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            850: '#1f2937',
                            900: '#111827',
                            950: '#030712',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #0f172a;
            background-image: 
                radial-gradient(at 0% 0%, rgba(245, 158, 11, 0.15) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(217, 119, 6, 0.15) 0px, transparent 50%);
            background-attachment: fixed;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cell {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cell:hover:not(:disabled) {
            transform: scale(1.05);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .cell.winner {
            background-color: rgba(245, 158, 11, 0.2);
            border-color: #f59e0b;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-2xl">
        <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
            <div>
                <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-400">Tic Tac Toe</h1>
                <p class="text-gray-400 text-sm">Klasik XOX oyunu</p>
            </div>
            
            <div class="flex bg-gray-800/50 p-1 rounded-xl backdrop-blur-sm border border-gray-700">
                <button onclick="setMode('ai')" class="mode-btn active px-4 py-2 rounded-lg text-sm font-medium transition-all bg-amber-600 text-white shadow-lg" id="btn-ai">
                    <i class="fas fa-robot mr-2"></i>Bilgisayar
                </button>
                <button onclick="setMode('2player')" class="mode-btn px-4 py-2 rounded-lg text-sm font-medium transition-all text-gray-400 hover:text-white" id="btn-2player">
                    <i class="fas fa-user-friends mr-2"></i>ƒ∞ki Ki≈üilik
                </button>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-4 mb-6">
            <div class="glass-panel p-4 rounded-xl text-center">
                <div class="text-xs text-gray-400 uppercase tracking-wider mb-1">X KAZANDI</div>
                <div class="text-2xl font-bold text-amber-400" id="xWins">0</div>
            </div>
            <div class="glass-panel p-4 rounded-xl text-center">
                <div class="text-xs text-gray-400 uppercase tracking-wider mb-1">BERABERE</div>
                <div class="text-2xl font-bold text-gray-400" id="draws">0</div>
            </div>
            <div class="glass-panel p-4 rounded-xl text-center">
                <div class="text-xs text-gray-400 uppercase tracking-wider mb-1">O KAZANDI</div>
                <div class="text-2xl font-bold text-blue-400" id="oWins">0</div>
            </div>
        </div>

        <div class="glass-panel p-6 rounded-2xl mb-6 relative overflow-hidden">
            <div class="text-center mb-6">
                <span id="status" class="inline-block px-4 py-2 rounded-full bg-gray-800/50 border border-gray-700 text-amber-400 font-bold">
                    <i class="fas fa-user mr-2"></i>Sƒ±ra Sizde (X)
                </span>
            </div>

            <div class="grid grid-cols-3 gap-3 max-w-[400px] mx-auto aspect-square" id="gameBoard">
                <!-- Cells generated by JS -->
            </div>
        </div>

        <div class="flex flex-wrap gap-3 mb-6">
            <button onclick="resetGame()" class="flex-1 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2 shadow-lg shadow-amber-900/20">
                <i class="fas fa-redo-alt"></i> Yeni Oyun
            </button>
            <a href="https://games.alienes.me" class="flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2 shadow-lg shadow-gray-900/20">
                <i class="fas fa-arrow-left"></i> Geri D√∂n
            </a>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="resultModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="glass-panel p-8 rounded-2xl text-center max-w-sm w-full mx-4 transform scale-100 transition-all">
            <div class="text-6xl mb-4" id="resultIcon">üèÜ</div>
            <h2 class="text-3xl font-bold text-white mb-2" id="resultTitle">Kazandƒ±n!</h2>
            <p class="text-gray-300 mb-6 text-lg" id="resultMessage">Tebrikler, harika bir oyun √ßƒ±kardƒ±n.</p>
            <div class="flex flex-col gap-3">
                <button onclick="closeModalAndReset()" class="w-full py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-redo-alt mr-2"></i> Tekrar Oyna
                </button>
                <a href="https://games.alienes.me" class="w-full py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-home mr-2"></i> Ana Men√º
                </a>
            </div>
        </div>
    </div>

    <script>
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let gameActive = true;
        let gameMode = 'ai'; // 'ai' or '2player'
        let stats = {
            xWins: parseInt(localStorage.getItem('tttXWins') || 0),
            oWins: parseInt(localStorage.getItem('tttOWins') || 0),
            draws: parseInt(localStorage.getItem('tttDraws') || 0)
        };

        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
            [0, 4, 8], [2, 4, 6] // diagonals
        ];

        updateStats();
        renderBoard();

        function setMode(mode) {
            gameMode = mode;
            
            // Update UI
            const btnAi = document.getElementById('btn-ai');
            const btn2p = document.getElementById('btn-2player');
            
            if (mode === 'ai') {
                btnAi.className = 'mode-btn active px-4 py-2 rounded-lg text-sm font-medium transition-all bg-amber-600 text-white shadow-lg';
                btn2p.className = 'mode-btn px-4 py-2 rounded-lg text-sm font-medium transition-all text-gray-400 hover:text-white';
            } else {
                btn2p.className = 'mode-btn active px-4 py-2 rounded-lg text-sm font-medium transition-all bg-amber-600 text-white shadow-lg';
                btnAi.className = 'mode-btn px-4 py-2 rounded-lg text-sm font-medium transition-all text-gray-400 hover:text-white';
            }
            
            resetGame();
        }

        function renderBoard() {
            const boardElement = document.getElementById('gameBoard');
            boardElement.innerHTML = '';

            board.forEach((cell, index) => {
                const cellElement = document.createElement('button');
                cellElement.className = `cell aspect-square rounded-xl text-4xl md:text-6xl font-bold flex items-center justify-center border-2 border-gray-700/50 bg-gray-800/30 ${cell === 'X' ? 'text-amber-400' : 'text-blue-400'}`;
                
                if (cell === 'X') {
                    cellElement.innerHTML = '<i class="fas fa-times"></i>';
                } else if (cell === 'O') {
                    cellElement.innerHTML = '<i class="far fa-circle"></i>';
                }
                
                cellElement.onclick = () => handleCellClick(index);
                
                if (cell || !gameActive) {
                    cellElement.disabled = true;
                }

                boardElement.appendChild(cellElement);
            });
        }

        function handleCellClick(index) {
            if (!gameActive || board[index] !== '') return;

            board[index] = currentPlayer;
            renderBoard();

            if (checkWin()) {
                handleWin();
                return;
            }

            if (board.every(cell => cell !== '')) {
                handleDraw();
                return;
            }

            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            updateStatus();

            if (gameMode === 'ai' && currentPlayer === 'O' && gameActive) {
                // Disable board while AI thinks
                const cells = document.querySelectorAll('.cell');
                cells.forEach(c => c.disabled = true);
                
                setTimeout(aiMove, 500);
            }
        }

        function aiMove() {
            const bestMove = getBestMove();
            if (bestMove !== -1) {
                handleCellClick(bestMove);
            }
        }

        function getBestMove() {
            // Try to win
            for (let i = 0; i < 9; i++) {
                if (board[i] === '') {
                    board[i] = 'O';
                    if (checkWin(true)) {
                        board[i] = '';
                        return i;
                    }
                    board[i] = '';
                }
            }

            // Block player from winning
            for (let i = 0; i < 9; i++) {
                if (board[i] === '') {
                    board[i] = 'X';
                    if (checkWin(true)) {
                        board[i] = '';
                        return i;
                    }
                    board[i] = '';
                }
            }

            // Take center
            if (board[4] === '') return 4;

            // Take corners
            const corners = [0, 2, 6, 8];
            const availableCorners = corners.filter(i => board[i] === '');
            if (availableCorners.length > 0) {
                return availableCorners[Math.floor(Math.random() * availableCorners.length)];
            }

            // Take any available
            const available = board.map((cell, idx) => cell === '' ? idx : null).filter(idx => idx !== null);
            return available[Math.floor(Math.random() * available.length)];
        }

        function checkWin(simulation = false) {
            return winPatterns.some(pattern => {
                const [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    if (!simulation) highlightWinner(pattern);
                    return true;
                }
                return false;
            });
        }

        function highlightWinner(pattern) {
            const cells = document.getElementById('gameBoard').children;
            pattern.forEach(index => {
                cells[index].classList.add('winner');
                cells[index].classList.remove('border-gray-700/50');
                cells[index].classList.add('border-amber-500');
            });
        }

        function handleWin() {
            gameActive = false;
            const winner = currentPlayer;
            
            if (winner === 'X') {
                stats.xWins++;
                localStorage.setItem('tttXWins', stats.xWins);
                showResult('ÔøΩÔøΩ', 'X Kazandƒ±!', 'Tebrikler, oyunu kazandƒ±nƒ±z!');
            } else {
                stats.oWins++;
                localStorage.setItem('tttOWins', stats.oWins);
                showResult('ü§ñ', 'O Kazandƒ±!', 'Maalesef bu sefer kaybettiniz.');
            }
            
            updateStats();
        }

        function handleDraw() {
            gameActive = false;
            stats.draws++;
            localStorage.setItem('tttDraws', stats.draws);
            updateStats();
            showResult('ü§ù', 'Berabere!', 'Dostluk kazandƒ±!');
        }

        function showResult(icon, title, message) {
            document.getElementById('resultIcon').textContent = icon;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultMessage').textContent = message;
            setTimeout(() => {
                document.getElementById('resultModal').classList.remove('hidden');
            }, 1000);
        }

        function closeModalAndReset() {
            document.getElementById('resultModal').classList.add('hidden');
            resetGame();
        }

        function updateStatus() {
            if (gameActive) {
                const statusEl = document.getElementById('status');
                if (gameMode === 'ai') {
                    if (currentPlayer === 'X') {
                        statusEl.innerHTML = '<i class="fas fa-user mr-2"></i>Sƒ±ra Sizde (X)';
                        statusEl.className = 'inline-block px-4 py-2 rounded-full bg-gray-800/50 border border-gray-700 text-amber-400 font-bold';
                    } else {
                        statusEl.innerHTML = '<i class="fas fa-robot mr-2"></i>Bilgisayar D√º≈ü√ºn√ºyor...';
                        statusEl.className = 'inline-block px-4 py-2 rounded-full bg-gray-800/50 border border-gray-700 text-blue-400 font-bold animate-pulse';
                    }
                } else {
                    statusEl.textContent = `Sƒ±ra: ${currentPlayer}`;
                    statusEl.className = `inline-block px-4 py-2 rounded-full bg-gray-800/50 border border-gray-700 font-bold ${currentPlayer === 'X' ? 'text-amber-400' : 'text-blue-400'}`;
                }
            }
        }

        function updateStats() {
            document.getElementById('xWins').textContent = stats.xWins;
            document.getElementById('oWins').textContent = stats.oWins;
            document.getElementById('draws').textContent = stats.draws;
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            gameActive = true;
            document.getElementById('resultModal').classList.add('hidden');
            updateStatus();
            renderBoard();
        }
    </script>
</body>
</html>
